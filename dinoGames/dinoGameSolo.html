<html>
    <head>
        <script
            src="http://www.skulpt.org/js/skulpt.min.js"
            type="text/javascript"
        ></script>
        <script
            src="http://www.skulpt.org/js/skulpt-stdlib.js"
            type="text/javascript"
        ></script>
    </head>
    <body>
        <script type="text/javascript">
            // output functions are configurable.  This one just appends some text
            // to a pre element.
            function outf(text) {
                var mypre = document.getElementById("output");
                mypre.innerHTML = mypre.innerHTML + text;
            }
            function builtinRead(x) {
                if (Sk.builtInFiles === undefined || Sk.builtInFiles["files"][x] === undefined) {
                    throw "File not found: '" + x + "'";
                } else {
                    return Sk.builtinFiles["files"][x];
                };
            };
            // Here's everything you need to run a python program in skulpt
            // grab the code from your textarea
            // get a reference to your pre element for output
            // configure the output function
            // call Sk.importMainWithBody()
            function runit() {
                var prog = `
                import pygame.display
                `;
                var mypre = document.getElementById("output");
                mypre.innerHTML = "";
                Sk.pre = "output";
                Sk.configure({ output: outf, read: builtinRead });
                (Sk.TurtleGraphics || (Sk.TurtleGraphics = {})).target =
                    "mycanvas";
                var myPromise = Sk.misceval.asyncToPromise(function() {
                    return Sk.importMainWithBody("<stdin>", false, prog, true);
                });
                myPromise.then(
                    function(mod) {
                        console.log("success");
                    },
                    function(err) {
                        console.log(err.toString());
                    }
                );
            }
        </script>
        <button type="button" onclick="runit()">Run</button>
        <pre id="output"></pre>
    </body>
</html>
